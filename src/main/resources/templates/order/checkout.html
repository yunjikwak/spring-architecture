<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}"></head>
<body class="bg-gray-100">
<nav th:replace="~{fragments/header :: navigator}"></nav>
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-6">주문/결제</h1>
    <form th:action="@{/orders/process}" th:object="${orderRequest}" method="post" class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="md:col-span-2">
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">주문 상품 정보</h2>
                <ul>
                    <li th:each="item : ${cart.items}" class="flex justify-between items-center py-2 border-b">
                        <span th:text="${item.productName} + ' - ' + ${item.optionName} + ' x ' + ${item.quantity}"></span>
                        <span th:text="${#numbers.formatDecimal(item.calculatePrice(), 0, 'COMMA', 0, 'POINT')} + '원'"></span>
                    </li>
                </ul>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">배송지 정보</h2>
                <div class="space-y-4">
                    <div>
                        <label for="recipient" class="block text-sm font-medium text-gray-700">받는 사람</label>
                        <input type="text" id="recipient" th:field="*{recipient}" class="mt-1 block w-full p-2 border rounded-md" required>
                    </div>
                    <div>
                        <label for="address" class="block text-sm font-medium text-gray-700">주소</label>
                        <input type="text" id="address" th:field="*{address}" class="mt-1 block w-full p-2 border rounded-md" required>
                    </div>
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700">연락처</label>
                        <input type="text" id="phone" th:field="*{phone}" class="mt-1 block w-full p-2 border rounded-md" required>
                    </div>
                </div>
            </div>
        </div>
        <div class="md:col-span-1">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">결제 정보</h2>
                <div class="mb-4">
                    <p class="flex justify-between"><span>총 상품 금액</span> <span th:text="${#numbers.formatDecimal(cart.calculateTotalPrice(), 0, 'COMMA', 0, 'POINT')} + '원'"></span></p>
                    <p class="flex justify-between"><span>배송비</span> <span>0원</span></p>
                </div>
                <div class="border-t pt-4">
                    <p class="flex justify-between font-bold text-lg"><span>최종 결제 금액</span> <span class="text-blue-600" th:text="${#numbers.formatDecimal(cart.calculateTotalPrice(), 0, 'COMMA', 0, 'POINT')} + '원'"></span></p>
                </div>
                <div class="mt-6">
                    <label for="paymentMethod" class="block text-sm font-medium text-gray-700 mb-2">결제 수단</label>
                    <select id="paymentMethod" th:field="*{paymentMethod}" class="w-full p-2 border rounded-md">
                        <option th:each="method : ${paymentMethods}" th:value="${method}" th:text="${method.description}"></option>
                    </select>
                </div>
                <button type="submit" class="w-full mt-6 bg-blue-500 text-white p-3 rounded-md hover:bg-blue-600">결제하기</button>
            </div>
        </div>
    </form>
</div>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>